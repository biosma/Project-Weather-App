(()=>{let e,t,o,n,a,c="Los Angeles";const l=document.querySelector(".submit"),r=document.querySelector(".search");let d=document.querySelector(".city-description"),u=document.querySelector(".unit"),s="°C";async function f(e,t){return o=await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${e}&lon=${t}&limit=1&appid=135f8d3f1557e18e0522ff6fed224cb9`),defaultSearch=await o.json(),defaultSearch[0].name}async function h(e){try{c=await e,localStorage.setItem("ciudad",`${c}`),localization=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${c}&limit=5&appid=135f8d3f1557e18e0522ff6fed224cb9`);const t=await localization.json(),o=t[0].lat,i=t[0].lon,n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${o}&lon=${i}&exclude=minutely,hourly&appid=135f8d3f1557e18e0522ff6fed224cb9`,{mode:"cors"});a=await n.json(),console.log(a),m(a,c)}catch(e){console.log(e)}}function p(e){const t=e.split(" ");for(var o=0;o<t.length;o++)t[o]=t[o].charAt(0).toUpperCase()+t[o].slice(1);return t.join(" ")}function m(e,t){let o,n,a,c;for(d.textContent=p(t),i=0;i<7;i++)o=document.querySelector(`.weather-${i}`),o.textContent=p(e.daily[i].weather[0].description),c=document.querySelector(`.humidity-${i}`),c.textContent=`Humidity: ${e.daily[i].humidity} %`,a=document.querySelector(`.wind-${i}`),n=document.querySelector(`.feelslike-${i}`),"°C"===s?(a.textContent=`Wind: ${e.daily[i].wind_speed.toFixed(2)} Km/h`,n.textContent=`Feels Like ${Math.round(-273+e.daily[i].feels_like.morn)+s}`):(a.textContent=`${(e.daily[i].wind_speed/1.609).toFixed(2)} Mp/h`,n.textContent=`Feels Like ${Math.round(9*(e.daily[i].feels_like.morn-273.15)/5+32)+s}`)}navigator.geolocation.getCurrentPosition((function(o){e=o.coords.latitude,t=o.coords.longitude,n=f(e,t),localStorage.setItem("ciudad",`${n}`),h(f(e,t))}),(function(){console.log("ocurrio un error o no hay permisos para ver la ubicación"),h("Los Angeles")})),r.addEventListener("change",(e=>{defaultSearch=e.target.value,h(defaultSearch)})),l.addEventListener("click",(()=>{defaultSearch=r.value,h(defaultSearch)})),u.addEventListener("click",(()=>{"°C"===s?(s="°F",u.textContent="°C"):(s="°C",u.textContent="°F"),m(a,c)}))})();