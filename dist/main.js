(()=>{let e,t,o,a,n,l="Los Angeles";const c=document.querySelector(".submit"),d=document.querySelector(".search");let r=document.querySelector(".city-description"),u=document.querySelector(".unit"),s="°C";async function f(e,t){return o=await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${e}&lon=${t}&limit=1&appid=135f8d3f1557e18e0522ff6fed224cb9`),defaultSearch=await o.json(),defaultSearch[0].name}async function h(e){try{l=await e,localStorage.setItem("ciudad",`${l}`),localization=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${l}&limit=5&appid=135f8d3f1557e18e0522ff6fed224cb9`);const t=await localization.json(),o=t[0].lat,i=t[0].lon,a=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${o}&lon=${i}&exclude=minutely,hourly&appid=135f8d3f1557e18e0522ff6fed224cb9`,{mode:"cors"});n=await a.json(),console.log(n),p(n,l)}catch(e){console.log(e)}}function m(e){const t=e.split(" ");for(var o=0;o<t.length;o++)t[o]=t[o].charAt(0).toUpperCase()+t[o].slice(1);return t.join(" ")}function p(e,t){let o,a,n,l;for(r.textContent=m(t),i=0;i<7;i++)o=document.querySelector(`.weather-${i}`),o.textContent=m(e.daily[i].weather[0].description),l=document.querySelector(`.humidity-${i}`),l.textContent="Humidity: "+e.daily[i].humidity+"%",n=document.querySelector(`.wind-${i}`),a=document.querySelector(`.feelslike-${i}`),"°C"===s?(n.textContent="Wind: "+e.daily[i].wind_speed.toFixed(2)+" Km/h",a.textContent="Feels Like "+Math.round(-273+e.daily[i].feels_like.morn)+s):(n.textContent=(e.daily[i].wind_speed/1.609).toFixed(2)+" Mp/h",a.textContent="Feels Like "+Math.round(9*(e.daily[i].feels_like.morn-273.15)/5+32)+s)}""===a?navigator.geolocation.getCurrentPosition((function(o){e=o.coords.latitude,t=o.coords.longitude,a=f(e,t),localStorage.setItem("ciudad",`${a}`),h(f(e,t))})):h(localStorage.getItem("ciudad")),d.addEventListener("change",(e=>{defaultSearch=e.target.value,h(defaultSearch)})),c.addEventListener("click",(()=>{defaultSearch=d.value,h(defaultSearch)})),u.addEventListener("click",(()=>{"°C"===s?(s="°F",u.textContent="°C"):(s="°C",u.textContent="°F"),p(n,l)}))})();